> 2017年2月6日
>
> 本文章仅为《C++ Primer 中文版》读书笔记，所有版权归原书所有。

### const限定符

- 使用const限定符定义常量
- const对象一旦创建后其值就不能再改变，所以const对象必须初始化。
- 只能在const对象上执行不改变其内容的操作
- 默认状态下，const对象仅在文件内有效，编译器在编译阶段将用到改变量的地方替换成相应的值
- 如果想要const对象在多个文件内共享，则应在声明和定义const对象时都添加extern关键字

##### 初始化和const对象的引用

初始化常量引用时允许用任意表达式作为初始值，只要该表达式的结果能转换成引用的类型即可。尤其，允许为一个常量引用绑定非常量的对象、字面值，甚至是个一般表达式。

前面说过引用类型必须与其引用对象的类型一致。而常量引用的初始化是个例外，具体原因参照原书P55（临时量的概念）。

##### const指针（常量指针）

```c++
int errNumb = 0;
// 将*放在const与变量名之前是想说明指针是一个常量，即不变的是指针本身的值而非指向的对象的值
int *const curErr = &errNumb;  // curErr将一直指向errNumb
const double pi = 3.1415926;
const double *const pip = &pi; // pip是一个指向常量对象的常量指针
```

> 注意，指针本身是一个常量并不意味着不能通过指针修改其所指对象的值，能否这样做完全依赖于所指的对象的类型。例如pip是一个指向常量的常量指针，则不论pip所指的对象值还是pip自己存储的地址都不能改变。相反如果pip指向的只一个非常量类型，则完全可以通过pip指针来修改其指向的对象值。

##### 顶层和底层const

注意区分指针本身是不是常量与指针所指对象是不是常量是两个相互独立的问题。

- 顶层const（top-level const）表示指针本身是一个常量
- 底层const（low-level const）表示指针所指对象是一个常量

##### constexpr和常量表达式

- 常量表达式指**①值不会改变**，**②编译过程就可得到计算结果**的表达式
- 字面值属于表达式
- 用常量表达式初始化的const对象也是常量表达式
- 声明为constexpr的变量一定是常量，且必须用常量表达式初始化
- 如果认定变量是一个常量表达式，则把它生命诚constexpr类型

##### 字面值类型

- 算数类型、引用和指针都属于字面值类型
- 自定义类、IO库、string等不属于字面值类型

##### constexpr与指针

- 在constexpr声明中如果定义了一个指针，限定符constexpr仅对指针有效，与指针所指的对象无关
  - const int *p = nullptr;  // p是一个指向整型常量的指针
  - constexpr int *p = nullptr;  // p是一个指向整数的常量指针



