> 2017年2月10日
>
> 本文章仅为《C++ Primer 中文版》读书笔记，所有版权归原书所有。

### 什么是数据结构

从最基本的层面来理解，数据结构就是把一组相关的数据元素组织起来然后使用它们的策略和方法。

C++语言允许用户以类的形式自定义数据类型。

### 自定义Sales_data类型

```c++
struct Sales_data {
    std::string bookNo;
    unsigned units_sold = 0;
    double revenue = 0.0;
}
```

- 这里的类以struct开始，紧跟着类名和类体（可为空）
- 类内部定义的名字必须唯一，但可与类外部定义的名字重复
- 类定义的最后一定要加上分号
- 类内部的数据成为数据成员，定义了类的具体内容，每个对象有自己的一份数据成员拷贝
- C++新标准规定可以为数据成员提供一个类内初始值，用于创建对象时初始化数据成员。否则将默认初始化。
- 除了struct之外还可以使用关键字class来定义自己的数据结构

### 头文件

类一般不定义在函数体内，当在函数体外部定义类时，在各个指定的源文件中可能只有一处该类的定义。而且要在不同文件中使用同一个类，类的定义就必须保持一致。

- 为确保各个文件中类的定义一致，类通常被定义在头文件中
- 类所在头文件的名字应与类的名字一致
- 头文件通常包含那些只能被定义一次的实体，如类、const和constexpr变量等

##### 预处理器

- 用于确保头文件多次包含仍能安全工作
- 直接从C语言继承而来，当预处理器看到#include标志时就会用制定的头文件的内容代替#include

##### 头文件保护符（header guard）

依赖于预处理变量，有两种状态：已定义和未定义

- \#define：指令把一个名字设定为预处理变量，
- \#ifdef：当且仅当变量已定义时为真
- \#ifndef：当且仅当变量未定义时为真
- \#endif：一旦检查结果为真，则执行后续操作直到此指令为止

##### 注意

- 整个程序中的与处理变量包括头文件保护符必须唯一
  - 基于头文件类的名字构建保护符的名字，以确保其唯一性
  - 为避免与程序中其他实体发生名字冲突，一般把与处理变量的名字全部大写
- 头文件即使没有被包含在其他头文件中，也应该设置保护符，没必要太在乎程序是否需要



